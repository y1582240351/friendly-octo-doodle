# 问题3

## 1、思路

### 对流派的估计

首先对数据进行整理与归类，整理出各流派的数据。整理数据的工作主要使用C++语言完成。

然后通过考察流派内部的关联性以及流派之间的关联程度，来实现对流派内与流派间关系的考察。这里我们使用马氏距离（Mahalanobis）来作为数据之间关联性的度量。采用马氏距离主要是利用其对于各类线性变换都具有稳定性，从而可以排除量纲造成的影响。马氏距离的计算如下
$$
d(\boldsymbol{x}, \boldsymbol{y})=\sqrt{(\boldsymbol{x}-\boldsymbol{y})^{\top} \boldsymbol{\Sigma}^{-1}(\boldsymbol{x}-\boldsymbol{y})}
$$
式中 $: \boldsymbol{x}, \boldsymbol{y}$ 为来自 $p$ 维总体 $Z$ 的样本观测值; $\boldsymbol{\Sigma}$ 为 $Z$ 的协方差矩阵,实际中 $\mathbf{\Sigma}$ 往往是未知 的,常常需要用样本协方差米估计。

### 对于各流派随时间的变化

利用`data_by_year.csv`文件中的数据，进行主成分分析降维后，画出各主成分随时间的变化折线图

### 对于流派之间的关系

我们可以对各流派进行聚类分析。由于各流派内部的样本容量不同，为了度量流派与流派之间的距离，我们这里选用了重心法(Centroid Method)。

> 重心法 
> $$
> D\left(G_{1}, G_{2}\right)=d(\overline{\boldsymbol{x}}, \overline{\boldsymbol{y}})
> $$
> 式中: $\bar{x}, \bar{y}$ 分别为 $G_{1}, G_{2}$ 的重心。

> 计算均值的方法如下（~~凑字数用~~）
>
> 离散型
>
> 。。。。。。
>
> 连续性
>
> 。。。。。。



## 2、聚类分析的原理

这里采用的主要是Q型聚类分析

在数据处理阶段我们得出了各个流派之间的重心（用各分量的均值来表示），我们以重心代表每一个流派的具体情况，然后利用重心计算流派两两之间的距离$\{d_{ij}\}$，记为矩阵$D = (d_{ij})$

记流派之间的个数为n，首先构造出n个类，此时，每一个类中只包含一个流派，每一类的平台高度为0。合并距离最近的两个类，这样我们可以得到一个新类，并且我们以这两个类之间的距离作为新类在聚类图中的新平台高度。不断重复上面的过程，最后我们可以一个最终的类，根据上述的过程我们可以得到一个聚类图。

> 一个例子：（由于我们实际操作中的数据量过大，这里我们假设只有7个类）
>
> 记 $\Omega=\left\{w_{1}, w_{2}, \cdots, w_{7}\right\},$ 枝类结果如下 : 当距离值为 $f_{5}$ 时,分为一类, 即
> $$
> G_{1}=\left\{w_{1}, w_{2}, w_{3}, w_{4}, w_{5}, w_{6}, w_{7}\right\}
> $$
> 当距离值为 $f_{4}$ 吋,分为两类,即
> $$
> G_{1}=\left\{w_{1}, w_{2}, w_{3}\right\}, G_{2}=\left\{w_{4}, w_{5}, w_{6}, w_{7}\right\}
> $$
> 当距离值为 $f_{3}$ 时,分为三类, 即
> $$
> G_{1}=\left\{w_{1}, w_{2}, w_{3}\right\}, G_{2}=\left\{w_{4}, w_{5}, w_{6}\right\}, G_{3}=\left\{w_{7}\right\}
> $$
> 当距离值为 $f_{2}$ 时,分为四类, 即
> $$
> G_{1}=\left\{w_{1}, w_{2}, w_{3}\right\}, G_{2}=\left\{w_{4}, w_{5}\right\}, G_{3}=\left\{w_{6}\right\}, G_{4}=\left\{w_{7}\right\}
> $$
> 当距离值为 $f_{1}$ 时,分为六类, 即
> $$
> G_{1}=\left\{w_{4}, w_{5}\right\}, G_{2}=\left\{w_{1}\right\}, G_{3}=\left\{w_{2}\right\}, G_{4}=\left\{w_{3}\right\}, G_{5}=\left\{w_{6}\right\}, G_{6}=\left\{w_{7}\right\}
> $$
> 当距离小于 $f_{1}$ 时,分为七类,每一个点自成一类。
>
> 这里$f_1 < f_2 < f_3 < f_4 < f_5$





## 3、结果

![](C:\Users\dell\Desktop\meisai code\流派内部马氏距离.png)

### 分析

通过观察图像可知，相同流派之间最大与最小的距离差距比较接近，可知同属一个流派的艺术家的主要风格有一定的相似之处。不同流派之间的差距大小有很大的差异，由此可以推知某一些流派之间可能会有一定的联系（继承关系或者相互影响的关系）。尽管流派之间的差距大小不一，但从总体而言，各流派之间还是存在一定的差距的。就结果而言，要严格区分各个流派结果也许没有人们预期中的那么理想。当然如果我们结合实际情况来看的话，各个流派都是在自由发展的，各个艺术家也同样如此，不同流派之间会相互影响，我们或许可以说出各个流派之间的主要差异，但要严格区分各个流派，可能最后只是一种为拟合数据而忽略现实的行为。

-------------------------------------------------





![](C:\Users\dell\Desktop\meisai code\主成分1随时间变化.png)

![](C:\Users\dell\Desktop\meisai code\主成分2随时间变化.png)

### 分析

这是主成分分析降维最终得到的结果随年份变化的图像

---------------------------------------------------------------------------





![](C:\Users\dell\Desktop\meisai code\1930~1950.png)

![](C:\Users\dell\Desktop\meisai code\1960~1980.png)

![](C:\Users\dell\Desktop\meisai code\1990~2010.png)

![](C:\Users\dell\Desktop\meisai code\图例.png)

### 分析

通过对比各年份各流派之间的艺术家我们可以得值各流派之间的变化情况。流行乐兴起知道现在仍然是主流，但现在也有其他新流派逐渐兴起。

----------------------------------------





![](C:\Users\dell\Desktop\meisai code\聚类图.png)

### 分析

如图，通过聚类图我们可以清楚地看到流派之间的关联



|    流派名称    | 对应的ID |
| :------------: | :------: |
|    Pop/Rock    |    1     |
|   Electronic   |    2     |
|     Reggae     |    3     |
|      Jazz      |    4     |
|    Country     |    5     |
| Comedy/Spoken  |    6     |
|      R&B       |    7     |
|   Classical    |    8     |
|     Latin      |    9     |
|     Vocal      |    10    |
|      Flok      |    11    |
| Easy Listening |    12    |
| International  |    13    |
|  Avant-Garde   |    14    |
|     Blues      |    15    |
| Stage &Screen  |    16    |
|    New Age     |    17    |
|   Religious    |    18    |
|    Unknown     |    19    |
|   Children's   |    20    |

